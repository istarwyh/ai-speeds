# Run pre-commit hooks
echo "🔍 Running pre-commit checks..."

# Check for large files in staged files only (excluding build directories and generated files)
echo "📏 Checking staged file sizes..."
git diff --cached --name-only | while read -r file; do
  if [ -f "$file" ]; then
    size=$(stat -f%z "$file" 2>/dev/null || stat -c%s "$file")
    if [ $size -gt 500000 ]; then
      echo "❌ Staged file $file is too large ($size bytes > 500KB)"
      exit 1
    fi
  fi
done

# Run lint-staged for incremental checks
echo "🧹 Running lint-staged..."
npx lint-staged

echo "✅ Pre-commit checks passed!"
