#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Pre-push security and quality checks
echo "ğŸš€ Running pre-push checks..."

# Final build verification
echo "ğŸ—ï¸  Final build verification..."
npm run build:client

# Enhanced security scan
echo "ğŸ”’ Enhanced security scanning..."
if command -v detect-secrets >/dev/null 2>&1; then
    detect-secrets scan --baseline .secrets.baseline .
fi

# Dependency vulnerability check
echo "ğŸ›¡ï¸  Checking for vulnerabilities..."
npm audit --audit-level=high

echo "âœ… Pre-push checks passed!"